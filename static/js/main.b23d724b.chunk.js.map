{"version":3,"sources":["App.module.css","../../src/hooks/useHeadingsExtractor.tsx","../../node_modules/classnames/index.js","../../src/index.tsx","../../src/hooks/useActiveHeadingObserver.tsx","App.tsx","index.tsx"],"names":["module","exports","getNestedHeadings","headingElements","nestedHeadings","title","heading","id","items","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","default","window","Headings","headings","activeHeadingId","className","activeClassName","styles","href","onClick","e","document","behavior","React","activeId","setActiveId","headingElementsRef","useRef","useEffect","observer","IntersectionObserver","map","headingElement","visibleHeadings","getIndexFromId","sortedVisibleHeadings","a","b","rootMargin","useActiveHeadingObserver","useState","setNestedHeadings","newNestedHeadings","useHeadingsExtractor","App","demoData","container","content","tocContainer","toc","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b23d724b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"content\":\"App_content__3La4L\",\"tocContainer\":\"App_tocContainer__2Bk9I\",\"toc\":\"App_toc__2e_g4\"};","import { useEffect, useState } from 'react'\nimport { Heading } from '../models/heading.model'\n\nexport const useHeadingsExtractor = () => {\n  const [nestedHeadings, setNestedHeadings] = useState<Heading[]>([])\n\n  useEffect(() => {\n    const headingElements = Array.from(\n      document.querySelectorAll<HTMLHeadingElement>('h2, h3'),\n    )\n\n    const newNestedHeadings = getNestedHeadings(headingElements)\n    setNestedHeadings(newNestedHeadings)\n  }, [])\n\n  return nestedHeadings\n}\n\nconst getNestedHeadings = (headingElements: HTMLHeadingElement[]) => {\n  const nestedHeadings: Heading[] = []\n\n  headingElements.forEach((heading) => {\n    const { innerText: title, id } = heading\n\n    if (heading.nodeName === 'H2') {\n      nestedHeadings.push({ id, title, items: [] })\n    } else if (heading.nodeName === 'H3' && nestedHeadings.length > 0) {\n      nestedHeadings[nestedHeadings.length - 1].items.push({\n        id,\n        title,\n        items: [],\n      })\n    }\n  })\n\n  return nestedHeadings\n}\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import React from 'react'\nimport { useHeadingsExtractor } from './hooks/useHeadingsExtractor'\nimport styles from './styles.module.css'\nimport { useActiveHeadingObserver } from './hooks/useActiveHeadingObserver'\nimport { Heading } from './models/heading.model'\nimport classNames from 'classnames'\n\ninterface TableOfContentsProps {\n  className?: string\n  activeClassName?: string\n}\n\nconst TableOfContents: React.FC<TableOfContentsProps> = ({\n  className,\n  activeClassName,\n}) => {\n  const activeHeadingId = useActiveHeadingObserver()\n  const headings = useHeadingsExtractor()\n\n  return (\n    <Headings\n      headings={headings}\n      activeHeadingId={activeHeadingId}\n      className={className}\n      activeClassName={activeClassName}\n    />\n  )\n}\n\ninterface HeadingsProps extends TableOfContentsProps {\n  headings: Heading[]\n  activeHeadingId?: string\n  className?: string\n  activeClassName?: string\n}\n\nexport const Headings: React.FC<HeadingsProps> = ({\n  headings,\n  activeHeadingId,\n  className,\n  activeClassName,\n}) => {\n  return (\n    <ul className={classNames(styles.ul, className)}>\n      {headings.map((heading) => (\n        <li key={heading.id} className={classNames(styles.li)}>\n          <a\n            href={`#${heading.id}`}\n            className={classNames(\n              styles.link,\n              activeHeadingId === heading.id && styles.active,\n              activeHeadingId === heading.id && activeClassName,\n            )}\n            onClick={(e) => {\n              e.preventDefault()\n              document.querySelector(`#${heading.id}`)?.scrollIntoView({\n                behavior: 'smooth',\n              })\n            }}\n          >\n            {heading.title}\n          </a>\n          {heading.items.length > 0 && (\n            <Headings\n              headings={heading.items}\n              activeHeadingId={activeHeadingId}\n              activeClassName={activeClassName}\n            />\n          )}\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default TableOfContents\n","import React, { useEffect, useRef } from 'react'\n\nexport const useActiveHeadingObserver = () => {\n  const [activeId, setActiveId] = React.useState<string>()\n\n  const headingElementsRef = useRef<{\n    [id: string]: IntersectionObserverEntry\n  }>({})\n\n  useEffect(() => {\n    const callback: IntersectionObserverCallback = (\n      headings: IntersectionObserverEntry[],\n    ) => {\n      headingElementsRef.current = headings.reduce((map, headingElement) => {\n        map[headingElement.target.id] = headingElement\n        return map\n      }, headingElementsRef.current)\n\n      const visibleHeadings: IntersectionObserverEntry[] = []\n      Object.keys(headingElementsRef.current).forEach((key) => {\n        const headingElement = headingElementsRef.current[key]\n        if (headingElement.isIntersecting) visibleHeadings.push(headingElement)\n      })\n\n      const getIndexFromId = (id: string) =>\n        headingElements.findIndex((heading) => heading.id === id)\n\n      if (visibleHeadings.length === 1) {\n        setActiveId(visibleHeadings[0].target.id)\n      } else if (visibleHeadings.length > 1) {\n        const sortedVisibleHeadings = visibleHeadings.sort(\n          (a, b) =>\n            (getIndexFromId(a.target.id) > getIndexFromId(b.target.id)) as any,\n        )\n        setActiveId(sortedVisibleHeadings[0].target.id)\n      }\n    }\n\n    const observer = new IntersectionObserver(callback, {\n      rootMargin: '0px 0px -40% 0px',\n    })\n\n    const headingElements = Array.from(document.querySelectorAll('h2, h3'))\n\n    headingElements.forEach((element) => observer.observe(element))\n\n    return () => observer.disconnect()\n  }, [setActiveId])\n\n  return activeId\n}\n","import React from \"react\";\n\nimport TableOfContents from \"@react/table-of-contents\";\nimport \"@react/table-of-contents/dist/index.css\";\nimport styles from \"./App.module.css\";\n\nconst App = () => {\n  const demoData = \"So you two dig up, dig up dinosaurs? My dad once told me, laugh and the world laughs with you, Cry, and I'll give you something to cry about you little bastard! Yeah, but your scientists were so preoccupied with whether or not they could, they didn't stop to think if they should.\\n\" +\n    \"\\n\" +\n    \"Must go faster. You're a very talented young man, with your own clever thoughts and ideas. Do you need a manager? You really think you can fly that thing? Hey, take a look at the earthlings. Goodbye! Life finds a way. Hey, you know how I'm, like, always trying to save the planet? Here's my chance.\" +\n    \"So you two dig up, dig up dinosaurs? My dad once told me, laugh and the world laughs with you, Cry, and I'll give you something to cry about you little bastard! Yeah, but your scientists were so preoccupied with whether or not they could, they didn't stop to think if they should.\\n\" +\n    \"\\n\" +\n    \"Must go faster. You're a very talented young man, with your own clever thoughts and ideas. Do you need a manager? You really think you can fly that thing? Hey, take a look at the earthlings. Goodbye! Life finds a way. Hey, you know how I'm, like, always trying to save the planet? Here's my chance.\" +\n    \"So you two dig up, dig up dinosaurs? My dad once told me, laugh and the world laughs with you, Cry, and I'll give you something to cry about you little bastard! Yeah, but your scientists were so preoccupied with whether or not they could, they didn't stop to think if they should.\\n\" +\n    \"\\n\" +\n    \"Must go faster. You're a very talented young man, with your own clever thoughts and ideas. Do you need a manager? You really think you can fly that thing? Hey, take a look at the earthlings. Goodbye! Life finds a way. Hey, you know how I'm, like, always trying to save the planet? Here's my chance.\" +\n    \"So you two dig up, dig up dinosaurs? My dad once told me, laugh and the world laughs with you, Cry, and I'll give you something to cry about you little bastard! Yeah, but your scientists were so preoccupied with whether or not they could, they didn't stop to think if they should.\\n\" +\n    \"\\n\" +\n    \"Must go faster. You're a very talented young man, with your own clever thoughts and ideas. Do you need a manager? You really think you can fly that thing? Hey, take a look at the earthlings. Goodbye! Life finds a way. Hey, you know how I'm, like, always trying to save the planet? Here's my chance.\";\n\n\n  return <div className={styles.container}>\n    <div className={styles.content}>\n      <h2 id=\"test\">Testing</h2>\n      <p>{demoData}</p>\n\n      <h2 id=\"test1\">Testing 1</h2>\n      <p>{demoData}</p>\n\n      <h3 id=\"test2\">Nested 2</h3>\n      <p>{demoData}</p>\n\n      <h3 id=\"test3\">Nested 3</h3>\n      <p>{demoData}</p>\n\n      <h2 id=\"test4\">Testing 4</h2>\n      <p>{demoData}</p>\n    </div>\n\n    <nav className={styles.tocContainer}>\n      <TableOfContents className={styles.toc}/>\n    </nav>\n  </div>;\n};\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}